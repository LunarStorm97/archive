name: Upload to Release

on:
  workflow_dispatch:
    inputs:
      DOWNLOAD_URL:
        description: "DOWNLOAD_URL"
        required: true
        default: "https://github.com/minimal-manifest-twrp/platform_manifest_twrp_aosp"

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Display run parameters
        run: |
          echo "DOWNLOAD URL: ${{ github.event.inputs.DOWNLOAD_URL }}"

      - name: Prepare environment
        run: |
          sudo mkdir -p /mnt/workspace
          sudo chown $USER:$USER /mnt/workspace

      - name: Download file
        run: |
          wget --content-disposition ${{ github.event.inputs.DOWNLOAD_URL }}
        working-directory: /mnt/workspace

      - name: Setup Git configuration
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"

      - name: Add downloaded file and commit
        run: |
          cd /mnt/workspace
          git add .
          git commit -m "Add downloaded file from ${DOWNLOAD_URL}"
        
      - name: Push changes
        run: |
          git push origin HEAD:main  # Cambia 'main' por la rama en la que desees hacer push
